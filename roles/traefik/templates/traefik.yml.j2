## Static configuration

global:
  sendAnonymousUsage: false

api:
  dashboard: true

entryPoints:
  web:
    address: ":80"
    forwardedHeaders:
      trustedIPs:
        - "172.16.0.0/12"
        - "192.168.0.0/16"
        - "10.0.0.0/8"
    http:
      redirections:
        entryPoint:
          to: websecure
          scheme: https

  websecure:
    address: ":443"
    http:
      tls:
        certResolver: cloudflareResolver
        domains:
          - main: "{{ server_fqdn }}"
            sans:
              - "*.{{ server_fqdn }}"

providers:
  docker:
    endpoint: unix:///var/run/docker.sock
    watch: true
    network: cloudflared
    exposedByDefault: false

log:
  level: {{ traefik_log_level }}
  noColor: true
  maxSize: 50
  maxBackups: 5
  maxAge: 7
  compress: true

accessLog:
  bufferingSize: 50

metrics:
  prometheus:
    buckets:
      - 0.1
      - 0.3
      - 1.2
      - 5.0
    addEntryPointsLabels: true
    addServicesLabels: true

certificatesResolvers:
  cloudflareResolver:
    acme:
      email: {{ default_email }}
      storage: "/etc/traefik/acme.json"
      dnsChallenge:
        provider: cloudflare
