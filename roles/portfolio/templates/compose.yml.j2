services:
  portfolio:
    image: nginx:alpine
    container_name: portfolio
    restart: unless-stopped
    security_opt:
      - no-new-privileges=true
    volumes:
      - /mnt/docker/volumes/portfolio/app:/usr/share/nginx/html:ro
    ports:
      - 127.0.0.1:8080:80
    networks:
      - cloudflared
    labels:
      - traefik.enable=true
      - traefik.http.routers.portfolio.rule=Host(`{{ portfolio_fqdn }}`)
      - traefik.http.routers.portfolio.service=portfolio
      - traefik.http.routers.portfolio.entrypoints=websecure
      - traefik.http.routers.portfolio.tls=true
      - traefik.http.routers.portfolio.tls.certresolver=cloudflareResolver
      - traefik.http.services.portfolio.loadbalancer.server.port=80

networks:
  cloudflared:
    external: true
